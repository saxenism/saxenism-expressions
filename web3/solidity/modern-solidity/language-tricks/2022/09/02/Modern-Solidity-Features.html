<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Modern Solidity</h1><p class="page-description">Short code snippets showing how to use modern Solidity features, also including the conventional (old) methods of doing the same tasks</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-09-02T00:00:00-05:00" itemprop="datePublished">
        Sep 2, 2022
      </time>
       â€¢ <span class="read-time" title="Estimated read time">
    
    
      1 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#web3">web3</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#solidity">solidity</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#modern-solidity">modern-solidity</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#language-tricks">language-tricks</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#code-snippets-depicting-modern-solidity">Code snippets depicting modern Solidity</a></li>
</ul><h2 id="code-snippets-depicting-modern-solidity">
<a class="anchor" href="#code-snippets-depicting-modern-solidity" aria-hidden="true"><span class="octicon octicon-link"></span></a>Code snippets depicting modern Solidity</h2>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//SPDX-License-Identifier: MIT
</span>
<span class="k">pragma</span> <span class="n">solidity</span> <span class="mf">0.8</span><span class="p">.</span><span class="mi">14</span><span class="p">;</span>

<span class="k">contract</span> <span class="n">ModernSolidityFeatures</span> <span class="p">{</span>
    <span class="n">TestContract</span> <span class="n">tcInstance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TestContract</span><span class="p">();</span>

    <span class="k">function</span> <span class="n">modernFunctionSelector</span><span class="p">()</span> <span class="k">public</span> <span class="k">view</span> <span class="k">returns</span><span class="p">(</span><span class="kt">bytes4</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">tcInstance</span><span class="p">.</span><span class="n">square</span><span class="p">.</span><span class="nb">selector</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="k">function</span> <span class="n">modernIsContract</span><span class="p">(</span><span class="kt">address</span> <span class="n">addr</span><span class="p">)</span> <span class="k">public</span> <span class="k">view</span> <span class="k">returns</span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">addr</span><span class="p">.</span><span class="n">code</span><span class="p">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nb">true</span> <span class="o">:</span> <span class="nb">false</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">function</span> <span class="n">conventionalIsContract</span><span class="p">(</span><span class="kt">address</span> <span class="n">addr</span><span class="p">)</span> <span class="k">public</span> <span class="k">view</span> <span class="k">returns</span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">uint32</span> <span class="n">sizeOfAddressCodeSection</span><span class="p">;</span>
        <span class="k">assembly</span> <span class="p">{</span>
            <span class="n">sizeOfAddressCodeSection</span> <span class="o">:=</span> <span class="n">extcodesize</span><span class="p">(</span><span class="n">addr</span><span class="p">)</span>
        <span class="p">}</span>   
        <span class="k">return</span> <span class="p">(</span><span class="n">sizeOfAddressCodeSection</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">function</span> <span class="n">conventionalFunctionSelector</span><span class="p">(</span><span class="kt">string</span> <span class="k">memory</span> <span class="n">functionSignature</span><span class="p">)</span> <span class="k">public</span> <span class="k">pure</span> <span class="k">returns</span><span class="p">(</span><span class="kt">bytes4</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kt">bytes4</span><span class="p">(</span><span class="nb">keccak256</span><span class="p">(</span><span class="kt">bytes</span><span class="p">(</span><span class="n">functionSignature</span><span class="p">)));</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">contract</span> <span class="n">TestContract</span> <span class="p">{</span>
    <span class="kt">uint256</span> <span class="k">public</span> <span class="n">number</span><span class="p">;</span>

    <span class="k">function</span> <span class="n">square</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">a</span><span class="p">)</span> <span class="k">public</span> <span class="k">pure</span> <span class="k">returns</span><span class="p">(</span><span class="kt">uint256</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">a</span><span class="o">*</span><span class="n">a</span><span class="p">;</span>
    <span class="p">}</span> 
<span class="p">}</span>
</code></pre></div></div>

  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="saxenism/saxenism-expressions"
        issue-term="title"
        label="blogpost-comment"
        theme="github-dark"
        crossorigin="anonymous"
        async>
</script><div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'https://saxenism.com/web3/solidity/modern-solidity/language-tricks/2022/09/02/Modern-Solidity-Features.html';
      this.page.identifier = 'https://saxenism.com/web3/solidity/modern-solidity/language-tricks/2022/09/02/Modern-Solidity-Features.html';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><a class="u-url" href="/web3/solidity/modern-solidity/language-tricks/2022/09/02/Modern-Solidity-Features.html" hidden></a>
</article>
